{% extends "pages/form.html" %}

{% load mezzanine_tags staticfiles %}

{% block extra_js %}
{{ block.super }}
<!-- gMap PLUGIN -->
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery.gmap.js"></script>
<script type="text/javascript">
      jQuery(document).ready(function(){

          jQuery('#map').gMap({
            address: '{{ settings.GMAP_LOC }}',
            panControl: true,
            zoomControl: true,
            zoomControlOptions: { style: google.maps.ZoomControlStyle.SMALL },
            mapTypeControl: true,
            scaleControl: true,
            streetViewControl: false,
            overviewMapControl: true,
            scrollwheel: true,
            icon: {
               image: "http://www.google.com/mapfiles/marker.png",
               shadow: "http://www.google.com/mapfiles/shadow50.png",
               iconsize: [20, 34],
               shadowsize: [37, 34],
               iconanchor: [9, 34],
               shadowanchor: [19, 34]
            },
            zoom:15,
            markers: [
               { 'address': '{{ settings.GMAP_LOC }}' }
            ]
         });

      });

 </script>
{% endblock %}

{% block main %}
<div id="map"></div>
{% endblock main %}


{% block right_panel %}

{% if request.GET.sent %}
    {% editable page.form.response %}
    <h2 class="title"><span> {{ page.form.response|richtext_filters|safe }}</span></h2>
    {% endeditable %}
{% else %}
    {% with page.form as page_form %}
    {% editable page_form.content %}
    <h2 class="title"><span> {{ page.form.content|richtext_filters|safe }}</span></h2>
    {% endeditable %}
    {% endwith %}

    {% errors_for form %}

    <form class="contact-form" method="post"{% if form.is_multipart %} enctype="multipart/form-data"{% endif %}>
         {% fields_for form %}
              <input class="btn send_btn" type="submit" value="{{ page.form.button_text }}">
    </form>
{% endif %}

{% endblock right_panel %}
